(()=>{"use strict";const e={int:e=>+/\-{0,1}\d+/.exec(e),noComments:e=>e.replace(/\/\*[\s\S]*?\*\/|\/\/.*/g,""),up0:e=>e.replace(/^./,e[0].toUpperCase()),toCamel:t=>t.replace(/-[a-z]+/g,(t=>e.up0(t.slice(1)))),ofCamel:e=>e.replace(/[A-Z]/g,"-$&").toLowerCase(),styleToJS:t=>e.noComments(t).replace(/\s+/g,"").split(";").reduce(((t,i)=>{if(i){let l=i.split(":");t[e.toCamel(l[0])]=l[1]||""}return t}),{}),jsToStyle:t=>{let i="";for(let l in t)i+=`${e.ofCamel(l)}: ${t[l]}; `;return i},isTouch:()=>"ontouchstart"in window};class t{constructor(e,t){Object.defineProperty(this,"parent",{value:t}),Object.defineProperty(t,"_dataList",{value:{}});for(let t in e){const i=t,l=e[i];Object.defineProperty(this,i,{get:function(){return i in this.parent._dataList?this.parent._dataList[i]:l},set:function(e){this.group={[i]:e}},enumerable:!0})}Object.defineProperty(this,"default",{get:function(){return e},enumerable:!0})}set text(e){this.parent.attributeChangedCallback("param",this.text,e)}get text(){let t="";return Object.keys(this).filter((e=>!isNaN(+e))).forEach((i=>{t+=`${e.ofCamel(this[i])}: ${this.parent._dataList[this[i]]}; `})),t.slice(0,-1)}set group(t){this.parent.attributeChangedCallback("param",this.text,e.jsToStyle(Object.assign({},this.group,t)))}get group(){let e={};return Object.keys(this).filter((e=>!isNaN(+e))).forEach((t=>{Object.assign(e,{[this[t]]:this.parent._dataList[this[t]]})})),e}set(){this.parent.setAttribute("param",this.text)}changedCallback(t,i=null,l=null){let n={},s=this.default,o=t?e.styleToJS(t):{};for(let e in o)if(e in s){let t=o[e].replace(/\s+/g,""),i=this[e],l=s[e],n=typeof l;if("boolean"===n){let n=["","true","false"].indexOf(t);o[e]=n<0?i:[l,!0,!1][n]}else o[e]="number"===n?isNaN(+t)?i:+t:t||l}let a=Object.assign({},o),r={},d=Object.keys(this);for(let e in this)d.includes(e)||(r[e]=this[e]);if(i)for(let e in o)a[e]=e in s?i(e,a[e],this[e],s[e]):null,null===a[e]&&delete a[e];l&&l(a,Object.assign({},r));let c=this.parent._dataList;Object.keys(this).filter((e=>!isNaN(+e))).forEach((e=>{delete c[this[e]],delete this[e]}));let h=0;for(let e in a)null!==a[e]&&(Object.defineProperty(this,`${h}`,{value:e,enumerable:!0,configurable:!0}),h++,Object.defineProperty(c,`${e}`,{value:a[e],configurable:!0}));for(let e in r){let t=this[e],i=r[e],l=e in o?o[e]:i;l===i&&l===t||(n[e]={ask:l,old:i,new:t})}return n}}class i extends t{constructor(e){super({xSide:"s",xDepend:"inverse",xHide:!1,xQty:0,x:0,xStep:1,ySide:"e",yDepend:"inverse",yHide:!1,yQty:0,y:0,yStep:1},e)}}class l extends HTMLElement{constructor(){super();const e=this,t=e.attachShadow({mode:"open"}),l=document.createElement("div");l.setAttribute("id","client"),l.lgxyWidth=l.lgxyHeight=0,t.append(document.createElement("style"),document.createElement("style"),l),Object.defineProperty(e,"param",{value:Object.create(new i(e))}),e.resizeObserver=new window.ResizeObserver((t=>{t.forEach(((t,i)=>{let n,s;t.borderBoxSize1?(n=t.borderBoxSize[0].inlineSize,s=t.borderBoxSize[0].blockSize):(n=t.contentRect.width,s=t.contentRect.height),l.lgxyWidth=Math.round(n),l.lgxyHeight=Math.round(s),e.update("level")}))})),this.resizeObserver.observe(l)}connectedCallback(){const e=this;e._isRender||(e.param.set(),e.update("strip"),this.shadowRoot.childNodes[2].innerHTML="<slot></slot>",e.event(),Object.defineProperty(e,"_isRender",{value:!0}))}disconnectedCallback(){this.resizeObserver.disconnect(),this.event(!1)}adoptedCallback(){}static get observedAttributes(){return["param"]}attributeChangedCallback(t,i,l){let n=this.param.changedCallback(l,((t,i,l,n)=>{const s=typeof i;if("number"===s)i=Math.max(n,e.int(i));else if("string"===s){let e=e=>!e.includes(i);("xSide"===t&&e(["n","s","none","none-n","none-s"])||"ySide"===t&&e(["w","e","none","none-w","none-e"])||"xDepend"===t&&e(["directly","inverse"])||"yDepend"===t&&e(["directly","inverse"]))&&(i=l)}return i}),((e,t)=>{["x","y"].forEach((t=>{let i=t in e?e[t]:0,l=Math.max(0,(t+"Qty"in e?e[t+"Qty"]:0)-1);i>l&&(e[t]=l)}))}));Object.keys(n).length&&this._isRender&&(this.update(("xSide"in n||"ySide"in n||"xHide"in n||"yHide"in n?"strip ":"")+"level"),this.dispatchEvent(new CustomEvent("lgxy",{detail:n,bubbles:!1,cancelable:!1})))}event(t=!0){if(t&&!this._eventList){let t=this;Object.defineProperty(this,"_eventList",{value:Object.create({},{down:{value:i=>function(t,i){if(t.target!==i)return;if(!e.isTouch()&&t.which>1)return;let l=e.isTouch()?t.changedTouches[0]:t,n=l.clientX,s=l.clientY;t.preventDefault();let o=i.shadowRoot.childNodes[2].getBoundingClientRect(),a=i.param,r=["n","none-n","none","none-s","s"].indexOf(a.xSide)-2,d=["w","none-w","none","none-e","e"].indexOf(a.ySide)-2,c=r>0?s>Math.trunc(o.bottom):s<=Math.trunc(o.top),h=d>0?n>Math.trunc(o.right):n<=Math.trunc(o.left);function f(t="remove"){t+="EventListener",e.isTouch()?(i[t]("touchmove",u,{passive:!1}),i[t]("touchend",p,!1),i[t]("touchcancel",p,!1)):(i[t]("mousemove",u),i[t]("mouseup",p),i[t]("mouseleave",p)),window[t]("resize",p,!1)}function p(){f()}function u(t){let i=e.isTouch()?t.changedTouches[0]:t,l=i.clientX,n=i.clientY;t.preventDefault(),g(l,n)}function g(e,t){if(!d||c&&!h){let t=e<=o.left?0:e>=o.right-1?a.xQty:Math.ceil((e-o.left)*a.xQty/o.width);a.x=(d>-1?"inverse"===a.xDepend:"directly"===a.xDepend)?t-1:a.xQty-t}if(!r||h&&!c){let e=t<=o.top?0:t>=o.bottom-1?a.yQty:Math.ceil((t-o.top)*a.yQty/o.height);a.y=(r>-1?"inverse"===a.yDepend:"directly"===a.yDepend)?e-1:a.yQty-e}}g(n,s),f("add")}(i,t)},wheel:{value:e=>function(e,t){if(e.ctrlKey||e.altKey||e.buttons)return;let i=e.deltaY>0?1:-1,l=t.param;e.shiftKey?l.x+=i*l.xStep:l.y+=i*l.yStep}(e,t)}})})}let i=this._eventList,l=(t?"add":"remove")+"EventListener";this[l](e.isTouch()?"touchstart":"mousedown",i.down,!1),this[l]("wheel",i.wheel,{passive:!1})}update(e="level"){const t=this,i=t.param;let l=["n","none-n"].includes(i.xSide)?-1:1,n=["w","none-w"].includes(i.ySide)?-1:1;const s=t.shadowRoot.childNodes;if(e.includes("strip")){let e=!i.xHide&&!i.xSide.includes("none"),o=!i.yHide&&!i.ySide.includes("none");s[0].textContent=`\n:host {\n  --color-xy: var( --lgxy-color-xy, transparent ) !important;\n  --color-level: var( --lgxy-color-level, rgba(100,100,100,0.3) );\n  --color-hover: var( --lgxy-color-hover, rgba(100,100,100,0.7) ) !important;\n  --wxy:${e||o?"calc( var( --lgxy-width, 0.8vw ) + 0px)":"0px"} !important;\n  --wx: ${e?"var( --wxy )":"0px"} !important;\n  --wy: ${o?"var( --wxy )":"0px"} !important;\n  position: ${t.parentElement&&"body"===t.parentElement.localName?"fixed":"relative"};\n\n\n  display: flex !important;\n  flex-direction: column !important; ${l>0?"":"\n  justify-content: flex-end !important;"}\n  overflow: hidden !important;\n  contain: layout !important;\n  box-shadow: var(--color-xy) ${-n}px ${-l}px 1px ,\n              var(--color-xy) calc(${-.75*n} * var(--wy)) calc( ${-.75*l} * var(--wx))\n              var(--wxy) inset !important;\n  top: 0;\n  left: 0;\n  width:  100%;\n  height: 100%;\n}\n#client {\n  flex-shrink: 0;\n  align-self: flex-${n>0?"start;":"end;"}\n  position: relative;\n  width:  calc( 100% - var(--wy) );\n  height: calc( 100% - var(--wx) );\n  contain: size layout;\n}\n:host(:hover) {\n  --color-level: var(--color-hover);\n}`}if(e.includes("level")){let e=i.x,o=i.xQty,a=(i.xStep,i.y),r=i.yQty,d=(i.yStep,"inverse"===i.xDepend?e+1:o-e-1),c="inverse"===i.yDepend?a+1:r-a-1,h=t.shadowRoot.childNodes[2],f=h.lgxyWidth,p=h.lgxyHeight,u=o?d===o?f:Math.ceil(d*f/o):0,g=r?c===r?p:Math.ceil(c*p/r):0;s[1].textContent=`\n#client {\n  box-shadow:\n    var(--color-level) ${.5*n}px ${.5*l}px 1px 0px ,\n    var(--color-level) ${n*f}px ${l*p}px 0px 0px ,\n    var(--color-level) calc( ${n} * ( var(--wxy) + ${u}px)) calc(${l} * (var(--wxy) + ${g}px)) 0px var(--wxy);\n}`}}}window.customElements.define("lgxy-box",l),(()=>{class i extends t{constructor(e){super({lgxy:"auto",gapCol:2,gapRow:2,rowHeight:22,headingHeight:24,footingHeight:0,divisionLine:2,go:"s"},e)}}class n{constructor(e){Object.defineProperty(this,"tds",{value:e}),Object.defineProperty(this,"list",{value:[]})}add(e={},t=this.list.length,i=!1){const l=this.tds,n=this.list.length,s=function(e,t){const i={id:"col"+e,width:100,widthMin:20,widthMax:null,head:void 0,headSay:void 0,when:e=>!1,cell:void 0,cellSay:void 0,cellGet:void 0,sortKey:void 0,foot:"",footSay:void 0,renew:[e=>e,0],shadow:!1,hidden:!1};return Object.assign(i,t),i.head||(i.head=i.id),i.headSay||(i.headSay=i.head),i.cellSay||(i.cellSay=i.cell),i.cellGet||(i.cellGet=i.cell),i.sortKey||(i.sortKey=i.cell),i.footSay||(i.footSay=i.foot),l.records.sortSet[i.id]=i.sortKey,delete i.sortKey,i.widthMin<6&&(i.widthMin=6),null!==i.widthMax&&i.widthMax<i.widthMin&&(i.widthMax=i.widthMin),i.width<i.widthMin&&(i.width=i.widthMin),null!==i.widthMax&&i.width>i.widthMax&&(i.width=i.widthMax),i}(n,e);!function(e,t,i){const l=e.links.templateCol.cloneNode();l.setAttribute("data-col",t),l.id=i.id,l.hidden=!0;const n=l.cloneNode();n.innerHTML="string"==typeof i.headSay?i.headSay:i.headSay(),n.classList.add("-tds-heading-col");const s=l.cloneNode();s.innerHTML=i.footSay,s.classList.add("-tds-footing-col"),e.links.headingSlide.append(n),e.links.footingSlide.append(s),e.links.templateRow.Slide.append(l.cloneNode());for(let t=0;t<e.rowMax+1;t++)e.links.dataSlide.children[t].append(l.cloneNode())}(l,n,s),this.list.push(s),s.hidden||l.listX.splice(l.listX.length-(i?0:l.fixedRight),0,n),l.xMax>-1&&l.updateData(void 0,void 0,n),null!==t&&(l.controlCol(!0,t),l.render=1)}moveLeft(){const e=this.tds,t=e.listX,i=e.x;i>(i<e.xLeft?0:i<e.xRight?e.xLeft:e.xRight)&&([t[i-1],t[i]]=[t[i],t[i-1]],e.controlCol(!1))}moveRight(){const e=this.tds,t=e.listX,i=e.x;i<(i<e.xLeft?e.xLeft-1:i<e.xRight?e.xRight-1:t.length-1)&&([t[i],t[i+1]]=[t[i+1],t[i]],e.controlCol(!1))}moveOff(){const e=this.tds,t=e.listX;let i=t.slice(0,e.xLeft).sort(((e,t)=>e-t)),l=t.slice(e.xRight).sort(((e,t)=>e-t)),n=t.slice(e.xLeft,e.xRight).sort(((e,t)=>e-t));i.concat(n,l).forEach(((e,i)=>t[i]=e)),e.controlCol(!1)}pinnedLeft(){const e=this.tds,t=e.listX,i=e.x,l=t[i];let n;if(n=i<e.xLeft){let n=t.slice(e.xLeft,e.xRight);n.push(l),n.sort(((e,t)=>e-t)),t.splice(e.xLeft-1+n.indexOf(t[i]),0,t.splice(i,1)[0]),e.fixedLeft--}else(n=i>=e.xRight)?(t.splice(e.xLeft,0,t.splice(i,1)[0]),e.fixedLeft++,e.fixedRight--):(n=e.xRight-e.xLeft>1)&&(t.splice(e.xLeft,0,t.splice(i,1)[0]),e.fixedLeft++);n&&e.controlCol()}pinnedRight(){const e=this.tds,t=e.listX,i=e.x,l=t[i];let n;if(n=i>=e.xRight){let n=t.slice(e.xLeft,e.xRight);n.push(l),n.sort(((e,t)=>e-t)),t.splice(e.xLeft+n.indexOf(t[i]),0,t.splice(i,1)[0]),e.fixedRight--}else(n=i<e.xLeft)?(t.splice(e.xRight-1,0,t.splice(i,1)[0]),e.fixedLeft--,e.fixedRight++):(n=e.xRight-e.xLeft>1)&&(t.splice(e.xRight-1,0,t.splice(i,1)[0]),e.fixedRight++);n&&e.controlCol()}fixedLeft(){const e=this.tds,t=e.x,i=e.listX;if(t<e.xLeft){let l=i.slice(t,e.xRight).sort(((e,t)=>e-t));i.splice(t,e.xLeft-t).sort(((e,t)=>e-t)).forEach((e=>{i.splice(t+l.indexOf(e),0,e)}))}else t>=e.xRight&&(e.fixedRight-=t-e.xRight);e.fixedLeft!==t&&(e.fixedLeft=t,e.controlCol())}fixedRight(){const e=this.tds,t=e.listX,i=e.xMax-e.x,l=i?e.x:t.length-1;if(l>=e.xRight){let i=t.slice(e.xLeft,l+1).sort(((e,t)=>e-t));t.splice(e.xRight,l-e.xRight+1).sort(((e,t)=>e-t)).forEach((l=>{t.splice(e.xLeft+i.indexOf(l),0,l)}))}else l<e.xLeft&&(e.fixedLeft=l);e.fixedRight!==i&&(e.fixedRight=i,e.controlCol())}shadow(){const e=this.list,t=this.tds,i=t.listX[t.x];e[i].shadow=!e[i].shadow,t.controlCol()}hidden(e){const t=this.tds,i=t.listX,l="number"==typeof e?i.indexOf(e):t.x,n=t.xRight,s=t.xLeft;if(l<0);else if(l>=n||l<s||n-s>1){let e;i.splice(l,1),(e=l>=n)?t.fixedRight--:(e=l<s)?t.fixedLeft--:e=n-s>1,e&&t.controlCol()}}hiddenOff(e){const t=this.list,i=this.tds,l=i.listX,n=l.indexOf(e);if(e>-1&&e<t.length&&!~n){let t=l.slice(i.xLeft,i.xRight);t.push(e),t.sort(((e,t)=>e-t)),l.splice(i.xLeft+t.indexOf(e),0,e),i.controlCol(!0,e)}}}class s{constructor(e){Object.defineProperty(this,"tds",{value:e}),Object.defineProperty(this,"sortSet",{value:{}}),Object.defineProperty(this,"sortApply",{value:[]});const t=(e,t)=>{switch(typeof e){case"string":return t[e]+"";case"function":return e(t)+"";default:return""}};Object.defineProperty(this,"filterSet",{value:{tds0:(e,i)=>{let l=t(e.cell,i),n=e.compare;return e.loose&&(l=l.trim().toLowerCase(),n=n.trim().toLowerCase()),l.includes(n)},tds1:(e,i)=>{let l=t(e.cell,i),n=e.compare;return e.loose&&(l=l.trim().toLowerCase(),n=n.trim().toLowerCase()),l===n},tds2:(e,i)=>{let l=t(e.cell,i),n=e.compare;return e.loose&&(l=l.trim().toLowerCase(),n=n.trim().toLowerCase()),isNaN(+l)||isNaN(+n)?l>n:+l>+n},tds3:(e,i)=>{let l=t(e.cell,i),n=e.compare;return e.loose&&(l=l.trim().toLowerCase(),n=n.trim().toLowerCase()),isNaN(+l)||isNaN(+n)?l<n:+l<+n},tds4:(e,i)=>{let l=t(e.cell,i),n=e.compare;return e.loose&&(l=l.trim().toLowerCase(),n=n.trim().toLowerCase()),(isNaN(+l)||isNaN(+n)?l>n:+l>+n)||l===n},tds5:(e,i)=>{let l=t(e.cell,i),n=e.compare;return e.loose&&(l=l.trim().toLowerCase(),n=n.trim().toLowerCase()),(isNaN(+l)||isNaN(+n)?l<n:+l<+n)||l===n},tds6:(e,i)=>{let l=t(e.cell,i),n=e.compare;return e.loose&&(l=l.trim().toLowerCase(),n=n.trim().toLowerCase()),l!==n},tds7:(e,i)=>{let l=t(e.cell,i),n=e.compare;return e.loose&&(l=l.trim().toLowerCase(),n=n.trim().toLowerCase()),l=l.slice(0,n.length),l===n},tds8:(e,i)=>{let l=t(e.cell,i),n=e.compare;return e.loose&&(l=l.trim().toLowerCase(),n=n.trim().toLowerCase()),!l.includes(n)}}}),Object.defineProperty(this,"filterApply",{value:[]})}sort(e,t=1,i=!1){const l=this.tds;e||(e=l.columns.list[l.listX[l.x]].id),this.sortMulty([{tag:e,mode:t}],i)}sortMulty(e=[],t=!1){const i=this.sortSet,l=this.sortApply,n=l.length;t||(l.length=0),e.forEach((e=>{if(e.tag in i){let t="mode"in e?e.mode:1,i=l.findIndex((t=>t.tag===e.tag));i>-1?t?l[i].mode=t:l.splice(i,1):t&&l.push({tag:e.tag,mode:t})}else console.error(`TDS.records: sortMulty() tag "${e.tag}" не зарегестрирован в sortSet`)})),l.length?this.sortRefrech():n&&this.sortOff()}sortRefrech(){const e=this.tds,t=e.listY,i=this.sortApply,l=this.sortSet;if(!i.length||!t.length)return;let n=t[e.y],s=(e,t)=>{switch(typeof e){case"string":return t[e]+"";case"function":return e(t)+"";default:return""}};const o=e.data;let a=i.map((e=>{let t=l[e.tag],i=s(t,o[n]);return{values:[],mode:e.mode,key:t,type:isNaN(+i)?"string":"number"}})),r=a.length;a.push([]),t.forEach(((e,t)=>{a[r].push([t,e]);let i=o[e];a.forEach(((e,t)=>{if(t<r){let l=s(e.key,i);a[t].values.push("string"===e.type?l.toUpperCase():+l)}}))})),a[r].sort(((e,t)=>{let i;for(let o=0;o<r&&(l=a[o].values[e[0]],n=a[o].values[t[0]],s=a[o].mode,i=l<n?-s:l>n?s:0,!i);o++);var l,n,s;return i})),t.length=0,a[r].forEach((e=>t.push(e[1]))),e.updateData(),e.y=t.indexOf(n)}sortOff(){const e=this.tds,t=e.listY,i=this.sortApply;let l=t[e.y];t.sort(((e,t)=>e-t)),i.length=0,e.updateData(),e.y=t.indexOf(l)}filter(e="tds0",t={},i=!1){return this.filterMulty([{tag:e,param:t}],i)}filterMulty(e=[],t=!1){const i=this.tds,l=i.columns.list,n=this.filterSet,s=this.filterApply;let o=0;return t||(s.length=0),e.forEach((e=>{if(e.tag in n)if("tds"===e.tag.slice(0,3)){let t=i.listX[i.x];"colId"in e.param?t=l.findIndex((t=>t.id===e.param.colId)):e.param.colId=l[t].id,t<0?console.error(`TDS.records: filterMulty() столбец с colId "${e.param.colId}" не зарегестрирован в TDS.columns`):(e.param.cell=l[t].cell,"loose"in e.param||(e.param.loose=!0),"compare"in e.param||(e.param.compare=""),e.param.compare+="",s.push(e),o++)}else s.push(e),o++;else console.error(`TDS.records: filterMulty() tag "${e.tag}" не зарегестрирован в filterSet`)})),(t?i.listY.length:i.data.length)?t?o?this.filterRefrech(o):-1:o?this.filterRefrech():this.filterOff()||-1:-1}filterRefrech(e=0){const t=this.tds,i=t.data,l=t.listY,n=this.filterSet,s=this.filterApply;let o=l[t.y];const a=[];if(e){let t=s.slice(-e);l.forEach((e=>{t.find((t=>!(0,n[t.tag])(t.param,i[e])))||a.push(e)}))}else i.forEach(((e,t)=>{s.find((t=>!(0,n[t.tag])(t.param,e)))||a.push(t)}));return l.length=0,a.forEach((e=>l.push(e))),t.lgxy.param.group={yQty:l.length,y:Math.max(l.indexOf(o),0)},t.updateData(),l.length}filterOff(){const e=this.tds,t=e.data,i=e.listY,l=i[e.y],n=this.filterApply;i.length=0,t.forEach(((e,t)=>i.push(t))),n.length=0,e.lgxy.param.group={yQty:i.length,y:Math.max(i.indexOf(l),0)},this.sortRefrech()}current(){const e=this.tds.listY[this.tds.y];return{recno:e,data:this.tds.data[e]}}append(e){const t=this.tds,i=t.data,l=t.listY;i.push(e),l.push(i.length-1),t.lgxy.param.group={yQty:l.length,y:Math.max(l.length-1,0)},this.sortRefrech()}change(e){const t=this.tds.listY[this.tds.y],i=this.tds.data[t];for(let l in i)l in e&&(this.tds.data[t][l]=e[l]);this.tds.updateData(this.tds.row,this.tds.row),this.sortRefrech()}delete(){const e=this.tds,t=e.data,i=e.listY,l=i[e.y];t.splice(l,1),i.splice(e.y,1),i.forEach(((e,t)=>{e>l&&(i[t]=e-1)})),e.lgxy.param.group={yQty:i.length,y:e.y}}}class o extends HTMLElement{constructor(){super();const t=this;Object.defineProperty(t,"render",{writable:!0,value:-1});const n=new l,s=document.createElement("div");s.setAttribute("class","-tds-table");let o=document.createElement("style"),a=[o,o.cloneNode(),o.cloneNode(),o.cloneNode(),o.cloneNode(),n];Object.defineProperty(t,"lgxy",{value:n}),Object.defineProperty(t,"links",{value:{table:s}}),["heading","data","footing"].forEach((i=>{let l=document.createElement("div");l.setAttribute("class","-tds-"+i);let n=new Array(3);["left","slide","right"].forEach(((l,s)=>{let o;n[s]=document.createElement("div"),n[s].setAttribute("class","-tds-"+l),"data"===i?(o=document.createElement("div"),o.classList.add("-tds-roll"),n[s].append(o)):"heading"===i?(o=document.createElement("div"),o.classList.add("-tds-roll","-tds-heading-row"),n[s].append(o)):"footing"===i?(o=document.createElement("div"),o.classList.add("-tds-roll","-tds-footing-row"),n[s].append(o)):o=n[s],t.links[i+e.up0(l)]=o})),l.append(...n),s.append(l)})),n.append(s),t.attachShadow({mode:"open"}).append(...a);const r=t.links.dataSlide.parentElement;r.tdsWidth=0,r.tdsHeight=0,t.links.client=r,t.resize=(e,t)=>{},t.resizeObserver=new window.ResizeObserver((e=>{let i=0,l=0;e.forEach(((e,n)=>{let s,o;e.borderBoxSize1?(s=Math.round(e.borderBoxSize[0].inlineSize),o=Math.round(e.borderBoxSize[0].blockSize)):(s=Math.round(e.contentRect.width),o=Math.round(e.contentRect.height)),i=s-(r.tdsWidth||0),l=o-(r.tdsHeight||0),r.tdsWidth=s,r.tdsHeight=o,t.render>0&&(i&&t.controlCol(!1,-1,i),l&&t.controlRow(!0,l),(i||l)&&window.setTimeout((()=>{t.resize(s,o)}),0))}))})),t.resizeObserver.observe(r),Object.defineProperty(t,"param",{value:Object.create(new i(t))});let d=document.createElement("div");d.classList.add("-tds-row"),t.links.templateRow={Slide:d,Left:d.cloneNode(!1),Right:d.cloneNode(!1)};let c=document.createElement("div");c.classList.add("-tds-cell"),t.links.templateCol=c}connectedCallback(){const e=this;if(e.render<0){e.tabIndex="0",e.param.set(),["hidden","auto"].includes(e.param.lgxy)&&(e.lgxy.param.group={xHide:!0,yHide:!0}),Object.defineProperty(e,"columns",{value:new n(e)}),Object.defineProperty(e,"records",{value:new s(e)}),Object.defineProperty(e,"listX",{value:[]}),Object.defineProperty(e,"listY",{value:[]}),Object.defineProperty(e,"fixedLeft",{writable:!0,value:0}),Object.defineProperty(e,"fixedRight",{writable:!0,value:0});const t=getComputedStyle(e),i=/"+/g,l=e=>t.getPropertyValue(e).replace(i,"");Object.defineProperty(e,"paramRoll",{value:{rows:0,hideRow:0,row:0,left:0,top:0,cssCursor:l("--tds-cursor-focusout"),cssActive:l("--tds-cursor-focusin"),cssLine:l("--tds-cursor-line"),cssShadow:l("--tds-col-shadow"),cssHeading:l("--tds-cell-heading"),cssData:l("--tds-cell-data"),cssFooting:l("--tds-cell-footing")}}),e.updateStyle("init"),e.event(),e.render=0}}disconnectedCallback(){this.resizeObserver.disconnect(),this.event(!1)}adoptedCallback(){}static get observedAttributes(){return["param"]}attributeChangedCallback(t,i,l){const n=this;let s,o,a,r,d=n.param.changedCallback(l,((t,i,l,n)=>("number"==typeof i?i=Math.max(e.int(i),t.includes("gap")||t.includes("Height")?0:n):("lgxy"===t&&!["auto","visible","hidden"].includes(i)||"go"===t&&!["s","r","d","l","u"].includes(i))&&(i=l),i)),((e,t)=>{}));if(Object.keys(d).length&&!(n.render<1)&&n.columns.list.length){if("lgxy"in d)if("auto"===d.lgxy.new)o=a=!0;else{let e="hidden"===d.lgxy.new;n.lgxy.param.group={xHide:e,yHide:e}}"gapCol"in d&&(s=o=!0),("gapRow"in d||"rowHeight"in d)&&(s=r=!0),("headingHeight"in d||"footingHeight"in d||"divisionLine"in d)&&(s=!0),s&&n.updateStyle("init"),o&&n.controlCol(!1),r?n.controlRow(!0):a&&n.controlRow(!1),n.dispatchEvent(new CustomEvent("tds",{detail:d,bubbles:!1,cancelable:!1}))}}set row(e){this.paramRoll.row=e<0||this.rowMax<0?0:e>this.rowMax?this.rowMax:e}get row(){return this.paramRoll.row}get rowMax(){return this.paramRoll.rows-1}set x(e){this.lgxy.param.x=e}get x(){return this.lgxy.param.x}set xMax(e){this.lgxy.param.xQty=e+1}get xMax(){return this.lgxy.param.xQty-1}get xLeft(){return this.fixedLeft}get xRight(){return this.listX.length-this.fixedRight}set y(e){this.lgxy.param.y=e}get y(){return this.lgxy.param.y}set yMax(e){this.lgxy.param.yQty=e+1}get yMax(){return this.lgxy.param.yQty-1}get yBeginSlide(){return this.y-this.row}get yEndSlide(){return this.yBeginSlide+this.rowMax}set data(e){const t=this;t._data=e;const i=t.listY;i.length=0,e.forEach(((e,t)=>{i.push(t)})),t.render>0&&(t.lgxy.param.group={yQty:e.length,y:0},t.updateData())}get data(){return this._data}use(e){if("object"!=typeof e)return;const t=this;t.render=0,t.data=e.data,"hrefCSS"in e&&fetch(e.hrefCSS).then((e=>e.text())).then((e=>t.shadowRoot.childNodes[4].textContent=e)),t.fixedLeft="fixedLeft"in e?e.fixedLeft:0,t.fixedRight="fixedRight"in e?e.fixedRight:0;for(let i in t.param.default)i in e&&(t.param[i]=e[i]);if("columns"in e&&e.columns.length>0){"data"in e||(e.data=[]);for(let i=0;i<e.columns.length;i++)t.columns.add(e.columns[i],null,!0)}else{if(!("data"in e&&Array.isArray(e.data)&&e.data.length))return;{const i=e.data[0];let l=0;for(let e in i){const n=e,s=i[n];t.columns.add({id:n,head:n,cell:n,cellSay:e=>`<span class="-tds-type-${typeof s}">${e[n]}</span>`,width:100},null,!0),l++}}}t.updateStyle("init"),t.controlCol(!0,0),t.lgxy.param.group={yQty:e.data.length,y:0},t.render=1}updateData(e=0,t=this.rowMax,i=-1){if(t<e)return;const l=this;let n=(e,t)=>{let i=l.data[l.listY[e]];switch(typeof t){case"string":return i[t];case"function":return t(i);default:return""}},s=(e,t)=>{let i=l.yBeginSlide+e,s=[].concat(Array.from(l.links.dataLeft.children[e].children),Array.from(l.links.dataSlide.children[e].children),Array.from(l.links.dataRight.children[e].children)),o=[];for(let e=0;e<s.length;e++){let a=s[e],r=+a.dataset.col;if(t<0||t===r){let e=l.columns.list[r].cellSay;o.push({cell:a,content:n(i,e)})}if(t===r)break}return o},o=[];for(let l=e;l<t+1;l++)o.push(s(l,i));o.forEach((e=>e.forEach((e=>e.cell.innerHTML=e.content))))}controlRow(e=!0,t=0){const i=this;if(!i.columns.list.length)return;let l=i.paramRoll.rows;e&&function(){const e=i.param.rowHeight,n=i.param.gapRow,s=i.paramRoll;t||(s.top=0);let o=s.top,a=i.row,r=i.links.client.tdsHeight,d=e+n,c=e>0?Math.min(i.listY.length,Math.ceil(r/d)):0;s.rows=c;let h=(c?c*d-n:0)-r;s.hideRow=h;let f=l-a-1,p=i.yMax-i.y-f,u={slide:i.links.dataSlide,left:i.links.dataLeft,right:i.links.dataRight},g={ins:0,del:0},x=c-l;if(x<0){for(let e=0;e<-x;e++){let t=!e&&o>0||e>=f?"firstChild":"lastChild";u.left[t].remove(),u.slide[t].remove(),u.right[t].remove(),"firstChild"===t&&(g.del++,a--)}i.row=a}else if(x>0){let e=i.links.templateRow,t={pre:{slide:[],left:[],right:[]},add:{slide:[],left:[],right:[]}};for(let i=0;i<x;i++){let l=i<p?"add":"pre";t[l].left.push(e.Left.cloneNode(!0)),t[l].slide.push(e.Slide.cloneNode(!0)),t[l].right.push(e.Right.cloneNode(!0))}g.ins=t.pre.slide.length,g.ins&&(u.left.prepend(...t.pre.left),u.slide.prepend(...t.pre.slide),u.right.prepend(...t.pre.right),a+=g.ins,i.row=a,i.updateData(0,g.ins-1)),t.add.slide.length&&(u.left.append(...t.add.left),u.slide.append(...t.add.slide),u.right.append(...t.add.right),i.updateData(c-t.add.slide.length,c-1))}if(x>0||t>0){let l=i.listY.length*d-n;if(g.ins)o=i.yBeginSlide?h:h<0?0:h;else if(o>0){let i=e-1;o=i-(i-o+Math.min(t,o))%d}i.yBeginSlide*d+o>0&&(!g.ins&&o<0&&(o=(n+o+Math.min(t,-o))%d-n),l-(i.yBeginSlide*d+o)-r<=0&&(o=h))}else(x<0||t<0)&&(g.del?o=~i.rowMax?h:0:o>0&&(o=(n+o+Math.min(-t,o))%d-n),(i.row+1)*d-n+(o<0?-o:o)>=r&&(o=h));s.top=o}(),e&&(t>0&&!l||!t)?i.cursor():i.updateStyle("scroll-row")}controlCol(e=!0,t=-1,i=0){const l=this,n=l.listX,s=l.columns.list;(e=function(e){s.forEach((e=>e.hidden=!0));let t=[],i=s.length-1;for(let l=n.length-1;l>-1;l--){let o=n[l];o>i||o<0||t.includes(o)?(n.splice(l,1),e=!0):(t.push(o),s[o].hidden=!1)}const o=Math.max(n.length-1,0);return l.fixedLeft>o&&(e=!0,l.fixedLeft=o),l.fixedRight>o-l.fixedLeft&&(e=!0,l.fixedRight=o-l.fixedLeft),e}(e))&&function(){const e=l.fixedLeft,t=l.fixedRight;l.links.headingLeft.childElementCount,l.links.headingRight.childElementCount;let i=l.links.templateRow,o={Left:Array.from(i.Left.children,(e=>+e.dataset.col)),Slide:Array.from(i.Slide.children,(e=>+e.dataset.col)),Right:Array.from(i.Right.children,(e=>+e.dataset.col))},a=((e,t,i)=>{let n={Left:[],Slide:[],Right:[]},s=e.length,o=l.columns.list.length;for(let i=0;i<t;i++)n.Left[i]=e[i];n.Left.sort(((e,t)=>e-t));for(let t=s-i;t<s;t++)n.Right.push(e[t]);n.Right.sort(((e,t)=>e-t));for(let e=0;e<o;e++)n.Left.includes(e)||n.Right.includes(e)||n.Slide.push(e);return n})(n,e,t),r=(e,t)=>{let n=[];n.push(i[e].children[t]),n.push(l.links["heading"+e].children[t]);let s=l.links["data"+e].children;for(let e=0;e<l.rowMax+1;e++)n.push(s[e].children[t]);return n.push(l.links["footing"+e].children[t]),n};const d="-tds-col-shadow";["Left","Right","Slide"].forEach((e=>{for(let t=0;t<o[e].length;t++){const l=o[e][t],n=i[e].children[t],a=s[l].shadow,c=n.classList.contains(d),h=s[l].hidden,f=n.hidden;a===c&&h===f||r(e,t).forEach((e=>{a&&!c?e.classList.add(d):!a&&c&&e.classList.remove(d),h&&!f?e.hidden=!0:!h&&f&&(e.hidden=!1)}))}}));let c=[],h=(e,t,i,l,n)=>{c.push({mode:e,fromSele:t,fromPos:i,toSele:l,toPos:n})};["Left","Right","Slide"].forEach(((e,t)=>{let i=["Left","Right","Slide"];i.splice(t,1);for(let t=0;t<o[e].length;t++){const l=o[e][t];if(!a[e].includes(l)){o[e].splice(t,1);let n=a[i[0]].includes(l)?i[0]:a[i[1]].includes(l)?i[1]:"";if(n){let i=o[n].findIndex((e=>e>l)),s=~i?"before":"append";~i?o[n].splice(i,0,l):o[n].push(l),h(s,e,t,n,i),t--}}}}));let f=l.paramRoll.rows;c.forEach((e=>{let[t,n,s,o,a]=[e.mode,e.fromSele,e.fromPos,e.toSele,e.toPos],[r,d]=[l.links["heading"+o],l.links["heading"+n]],[c,h]=[l.links["footing"+o],l.links["footing"+n]],[p,u]=[l.links["data"+o],l.links["data"+n]];if("append"===t){r.append(d.children[s]),c.append(h.children[s]);for(let e=0;e<f;e++)p.children[e].append(u.children[e].children[s]);i[o].append(i[n].children[s])}else{r.children[a].before(d.children[s]),c.children[a].before(h.children[s]);for(let e=0;e<f;e++)p.children[e].children[a].before(u.children[e].children[s]);i[o].children[a].before(i[n].children[s])}})),l.xMax-n.length+1&&(l.xMax=n.length-1)}(),l.updateStyle("cols"+(i?"+scroll-col":""));const o=l.links.currentCell,a=l.fixedLeft;setTimeout((()=>{let e=~t?n.indexOf(t):o?n.indexOf(+o.dataset.col):a;e<0||~t&&l.x===e?l.cursor():l.x=e}),0)}cursor(){const e=this;let t=e.links.currentCell,i=e.links.currentLine;if(t&&(t.classList.remove("-tds-cursor","-tds-active"),t=void 0,i.left.classList.remove("-tds-line"),i.slide.classList.remove("-tds-line"),i.right.classList.remove("-tds-line"),i=void 0),!~e.rowMax)return;let l,n=e.listX,s=e.x,o=e.row,a=(e.rowMax,s<e.xLeft?"dataLeft":s<e.xRight?"dataSlide":"dataRight"),r=n[s],d=e.links[a].children[o].children;for(let e=0;e<d.length;e++)if(+d[e].dataset.col===r){l=d[e];break}e.links.currentCell=l,l&&(i={left:e.links.dataLeft.children[o],slide:e.links.dataSlide.children[o],right:e.links.dataRight.children[o]},i.left.classList.add("-tds-line"),i.slide.classList.add("-tds-line"),i.right.classList.add("-tds-line"),e.links.currentLine=i,l.classList.add("-tds-cursor"),document.activeElement===e&&l.classList.add("-tds-active"),0===e.row&&e.rowMax>0?e.paramRoll.top=0:e.row===e.rowMax&&(e.paramRoll.top=Math.max(e.paramRoll.hideRow,0)),this.updateStyle("scroll-col+scroll-row "))}event(t=!0){if(t&&!this._eventList){let t=this;Object.defineProperty(this,"_eventList",{value:Object.create({},{lgxy:{value:e=>function(e,t){document.activeElement!==t&&("x"in e.detail||"y"in e.detail)&&t.focus();let i=!1,l=!1;if(l="yQty"in e.detail){t.controlRow(!0);let l="y"in e.detail?e.detail.y.new:t.y;l>t.rowMax?t.yEndSlide>t.yMax&&(t.row+=t.yEndSlide-t.yMax):t.row=l,i=!0}else if("y"in e.detail){let n=e.detail.y.ask<0,s=!e.detail.y.new,o=e.detail.y.new===t.yMax,a=e.detail.y.ask>e.detail.y.new,r=e.detail.y.new-e.detail.y.old,d=n&&!s||a&&!o||t.row+r<0||t.row+r>t.rowMax;r&&(n||s?t.row=0:a||o?t.row=t.rowMax:d?t.yBeginSlide<0?t.row+=t.yBeginSlide:t.yEndSlide>t.yMax&&(t.row+=t.yEndSlide-t.yMax):t.row+=r,d&&(l=!0),i=!0)}"x"in e.detail&&e.detail.x.new===e.detail.x.ask&&(i=!0),l&&t.updateData(),i&&t.cursor()}(e,t)},keydown:{value:e=>function(e,t){let i=!0,l=e.key;switch(e.ctrlKey||e.altKey||!(e.code.includes("Key")||e.code.includes("Digit")||e.code.includes("Numpad")||["Backquote","Minus","Equal","IntlYen","BracketLeft","BracketRight","Backslash","Semicolon","Quote","IntlBackslash","Comma","Period","Slash","IntlRo"].includes(e.code))||(l="Enter"),l){case"ArrowRight":t.x++;break;case"ArrowLeft":t.x--;break;case"ArrowDown":e.ctrlKey?t.y=t.yMax:t.y++;break;case"ArrowUp":e.ctrlKey?t.y=0:t.y--;break;case"Home":e.ctrlKey?t.lgxy.param.group={x:0,y:0}:t.x=0;break;case"End":e.ctrlKey?t.lgxy.param.group={x:t.xMax,y:t.yMax}:t.x=t.xMax;break;case"PageDown":t.y+=t.paramRoll.rows-(t.paramRoll.hideRow>0?1:0);break;case"PageUp":t.y-=t.paramRoll.rows-(t.paramRoll.hideRow>0?1:0);break;case"Enter":let l=t.columns.list,n=t.listX,s=t.param.go,o=e=>{let t=0;if("r"===s){let i=n.length;for(let s=e;s<i&&l[n[s]].shadow;s++)t++;t===i-e&&(t=null)}else if("l"===s){for(let i=e;i>-1&&l[n[i]].shadow;i--)t--;e+1+t!==0&&(t=null)}return t},a=!1;if("r"===s||"l"===s){let e=o(t.x);e&&(t.x+=e,a=!0)}let r=l[n[t.x]],d=t.data[t.listY[t.y]],c=!r.shadow&&r.when(d);if("s"===s);else if("d"===s)t.y++;else if("u"===s)t.y--;else if(c||!a){let e="r"===s?1:-1,i=o(t.x+e);null===i||(t.x+=e+i)}break;default:i=!1}i&&e.preventDefault()}(e,t)},down:{value:i=>n(i,t,e.isTouch()?"touchstart":"mousedown")},dbldown:{value:e=>n(e,t,"dblclick")},focus:{value:e=>{let i=t.links.currentCell;i&&!i.classList.contains("-tds-active")&&i.classList.add("-tds-active")}},blur:{value:e=>{let i=t.links.currentCell;i&&i.classList.contains("-tds-active")&&i.classList.remove("-tds-active")}}})})}let i=this._eventList,l=(t?"add":"remove")+"EventListener";function n(t,i,l){if(t.target!==i)return;if(!e.isTouch()&&t.which>1)return;t.preventDefault(),document.activeElement!==i&&i.focus(),e.isTouch()&&t.changedTouches[0];let n=(e=>{for(;e&&(e.classList.value.includes("-tds-type")||!e.classList.value.includes("-tds-"));)e=e.parentElement;return e})(t.composedPath()[0]),s=n?n.classList.value:"";if(s.includes("-tds-heading-col")){let o=t.clientX;i.x=i.listX.indexOf(+n.dataset.col);let a=i.columns.list[+n.dataset.col];function r(e){e.preventDefault();let t=e.clientX-o;o=e.clientX;let l=!1,n=a.width;n+t<a.widthMin&&(t=a.widthMin-n,l=!0),null!==a.widthMax&&n+t>a.widthMax&&(t=a.widthMax-n,l=!0),t&&(a.width=n+t,i.controlCol(!1)),l&&d()}function d(){n.removeEventListener("mouseleave",d),n.removeEventListener("mouseup",d),n.removeEventListener("mousemove",r),i.event(),n.style.cursor=""}"mousedown"===l&&a.widthMin!==a.widthMax&&(n.style.cursor="col-resize",i.event(!1),n.addEventListener("mousemove",r),n.addEventListener("mouseup",d),n.addEventListener("mouseleave",d))}else if(s.includes("-tds-footing-col"))i.x=i.listX.indexOf(+n.dataset.col);else if(s.includes("-tds-cell")){let c=n.parentElement,h=i.listX.indexOf(+n.dataset.col),f=[].slice.apply(c.parentElement.children).indexOf(c)-i.row;h!==i.x&&f?i.lgxy.param.group={x:h,y:i.y+f}:h!==i.x?i.x=h:f&&(i.y+=f),t.type}}this.lgxy[l]("lgxy",i.lgxy,!1),this[l]("keydown",i.keydown,!1),this[l]("focus",i.focus,!0),this[l]("blur",i.blur,!0),this[l](e.isTouch()?"touchstart":"mousedown",i.down,!1),this[l]("dblclick",i.dbldown,!1)}updateStyle(e="init+cols+scroll-col+scroll-row"){const t=this,i=t.param,l=t.paramRoll,n=i.gapCol,s=i.gapRow,o=t.columns.list,a=t.listX,r=t.links,d=t.shadowRoot.childNodes;if(e.includes("init")){const e=i.divisionLine,o=i.rowHeight,a=l.cssCursor||"outline: 1px solid rgb(80,135,215);\n  outline-offset: -1px;",r=l.cssActive||"filter: brightness( 80%);",c=l.cssLine||"filter: brightness( 90%);",h=l.cssShadow||"filter: brightness( 75%);",f=l.cssData||"background-color: rgb(255,255,255);",p=l.cssHeading||"text-align: center; "+f,u=l.cssFooting||f;let g=`\n:host {\n  --gap-color:   var( --tds-gap-color, rgb(218,218,218) ) !important;\n  --fixed-color: var( --tds-fixed-color, rgb(80,135,215) ) !important;\n  cursor:default !important;\n  contain: layout !important;\n  outline: none !important;\n  position: ${t.parentElement&&"body"===t.parentElement.localName?"fixed":"relative"};\n  width:100%; height:100%;\n  top:  0;\n  left: 0;\n}\n\n.-tds-table {\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n  overflow: hidden;\n  background: var( --gap-color );\n  width: 100%;\n  height: 100%;\n}\n\n.-tds-heading, .-tds-data, .-tds-footing {\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-start;\n}\n.-tds-data { flex: 1;  height: 100%; }\n.-tds-heading, .-tds-footing { flex-shrink: 0; }\n.-tds-heading { height: ${i.headingHeight}px;}\n.-tds-footing { height: ${i.footingHeight}px; }\n\n.-tds-left, .-tds-slide, .-tds-right {\n  position: relative;\n  overflow: hidden;\n  height: 100%;\n}\n.-tds-left, .-tds-right { flex-shrink: 0; }\n.-tds-slide { flex:1; }\n\n\n.-tds-roll { position: absolute; }\n.-tds-data .-tds-roll {\n  display: grid;\n  grid-auto-rows: ${o}px;\n  row-gap: ${s}px;\n}\n.-tds-heading .-tds-roll, .-tds-footing .-tds-roll {\n  height: 100%;\n}\n\n.-tds-row, .-tds-heading-row, .-tds-footing-row {\n  display: grid;\n  column-gap: ${n}px;\n}\n.-tds-heading-row {\n  box-sizing: border-box ;\n  overflow: hidden;\n  border-bottom: ${e}px solid var( --gap-color );\n}\n\n.-tds-footing-row {\n  box-sizing: border-box ;\n  overflow: hidden;\n  border-top: ${e}px solid var( --gap-color );\n}\n\n.-tds-cell {\n  overflow: hidden;\n  padding: 2px;\n  user-select: none;\n }\n.-tds-data .-tds-cell {\n  contain: layout;\n  ${f}\n}\n.-tds-data .-tds-cell[hidden] {\n  display: none;\n}\n.-tds-heading-col { ${p} }\n.-tds-heading-col[hidden] {\n  display: none;\n}\n.-tds-footing-col { ${u} }\n.-tds-footing-col[hidden] {\n  display: none;\n}\n\n.-tds-data .-tds-line .-tds-cell { ${c} }\n.-tds-data .-tds-line .-tds-col-shadow, .-tds-col-shadow {\n  ${h}\n}\n\n.-tds-data .-tds-line .-tds-cursor {\n  ${a}\n}\n.-tds-data .-tds-line .-tds-active {\n  ${r}\n}\n\n.-tds-type-string  {}\n.-tds-type-number  { text-align: right;  }\n.-tds-type-boolean { text-align: center; }\n.-tds-type-object  {}\n}`;d[0].textContent=g}if(e.includes("cols")){let e={dataLeft:"",dataSlide:"",dataRight:""},i={dataLeft:"",dataSlide:"",dataRight:""},l={dataLeft:-n,dataSlide:-n,dataRight:-n},s="";for(let r=0;r<a.length;r++){let d=a[r],c=o[d].width,h=r<t.xLeft?"dataLeft":r<t.xRight?"dataSlide":"dataRight";e[h]+="col"+d+" ",i[h]+=c+"px ",l[h]+=c+n,s+=`\n.-tds-cell[data-col="${d}"] {\n  grid-area: col${d};\n}`}let r=0;if(["dataLeft","dataSlide","dataRight"].forEach((e=>{l[e]>0?r+=l[e]+("dataSlide"===e?0:n):l[e]=0})),"auto"===t.param.lgxy&&!t.lgxy.param.xSide.includes("none")){let e=r<t.links.client.tdsWidth;e!==t.lgxy.param.xHide&&(t.lgxy.param.xHide=e)}l.dataLeft&&(s+=`\n.-tds-left {\n  width: ${l.dataLeft}px;\n  min-width: ${Math.min(20,l.dataLeft)}px;\n  max-width: calc(100% - ${Math.min(20,l.dataSlide)+Math.min(20,l.dataRight)}px);\n  border-right: ${n}px solid var(--fixed-color);\n}\n.-tds-left .-tds-roll {right: 0;}\n\n.-tds-heading .-tds-left .-tds-heading-row,\n.-tds-footing .-tds-left .-tds-footing-row,\n.-tds-data .-tds-left .-tds-row {\n  grid-template-areas: "${e.dataLeft}";\n  grid-template-columns: ${i.dataLeft};\n}`),l.dataSlide&&(s+=`\n.-tds-slide { min-width: ${Math.min(20,l.dataSlide)}px; }\n.-tds-heading .-tds-slide .-tds-heading-row,\n.-tds-footing .-tds-slide .-tds-footing-row,\n.-tds-data    .-tds-slide .-tds-row {\n  grid-template-areas: "${e.dataSlide}";\n  grid-template-columns: ${i.dataSlide};\n}`),l.dataRight&&(s+=`\n.-tds-right {\n  width: ${l.dataRight}px;\n  min-width: ${Math.min(20,l.dataRight)}px;\n  max-width: calc(100% - ${Math.min(20,l.dataSlide)}px);\n  border-left: ${n}px solid var(--fixed-color) ;\n}\n.-tds-heading .-tds-right .-tds-heading-row,\n.-tds-footing .-tds-right .-tds-footing-row,\n.-tds-data .-tds-right .-tds-row {\n\n  grid-template-areas: "${e.dataRight}";\n  grid-template-columns: ${i.dataRight};\n}`),d[1].textContent=s}if(e.includes("scroll")&&t.render>0){if(e.includes("scroll-row")){if("auto"===t.param.lgxy&&!t.lgxy.param.ySide.includes("none")){let e=t.paramRoll.rows===t.listY.length&&t.paramRoll.hideRow<=0;e!==t.lgxy.param.yHide&&(t.lgxy.param.yHide=e)}d[2].textContent=`\n.-tds-data .-tds-roll {\n  top: ${-l.top}px;\n}`}if(e.includes("scroll-col")&&r.currentCell){let e=+r.currentCell.dataset.col,i=a.indexOf(e),s=r.client.tdsWidth,c=0,h=-n;for(let e=t.xLeft;e<t.xRight;e++){let t=o[a[e]].width+n;e<i&&(c+=t),h+=t}let f=l.left,p=Math.max(0,c+o[e].width-s);p>c&&(p=c),(f<p||f>c)&&(f=p),f=Math.max(0,f-Math.max(0,s-(h-f))),l.left=f,d[3].textContent=`\n.-tds-slide .-tds-roll {\n  left: ${-f}px;\n}`}}}}window.customElements.define("tds-box",o)})()})();